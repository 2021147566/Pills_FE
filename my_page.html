<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Page | AL-I</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="mypage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

</head>

<body>

    <div class="bar">
        <a class="bar_left" href="main.html">

            <div class="logo">
                <img src="img/pill.png" alt="logo" width="80px" height="80px">
            </div>
            <div class="title">
                <h1>AL-I</h1>
            </div>
        </a>
        <div class="bar_right">
            <!-- {% if not user.is_authenticated %} -->

            <a class="login" href="login.html">로그인</a><!-- href="/login" -->
            <a class="signup" href="signup.html">회원가입</a> <!-- href="/signup" -->

            <!-- {% else %} -->
            <a class="logout" href="logout.html">로그아웃</a><!-- href="/logout" -->
            <a class="profile" href="my_page.html"><!-- href="/profile/{{ user.username }}" -->
                <img class="bar_profile" src="img/profile.jpg" alt="profile"><!-- src = "{{ user. profile }}" -->
            </a>
            <!-- {% endif %} -->
        </div>
    </div>
    <form>
        <div class="container text-center">
            <div class="row">
                <div class="row align-items-center" style=" position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                    <div class="col">
                        <img id="my_profile_img" style="width: 400px; height: 400px; object-fit: cover;" class="img-fluid rounded-circle border border-3 shadow"> <br>
                        <label for="update_profile_img" class="btn btn-outline-secondary shadow-sm" onclick="onClickUpload()" style="margin: 20px;">이미지 업로드</label>
                        <input style="display: none;" id="update_profile_img" type="file" accept="image/*"  onchange="handleProfilePreview(this)"><br>
                    </div>
                    
                    <div class="col" style="margin-right: 100px;">
                            <ul class="list-group list-group-horizontal-xxl shadow-sm">
                                <li class="list-group-item col-2 list-group-item-secondary fw-semibold" style="display: flex; align-items: center; justify-content: flex-end;">이메일 : </li>
                                <li class="list-group-item col-10" style="display: flex;"> <span id="my_email" class="btn"></span></li>
                            </ul>
                            <ul class="list-group list-group-horizontal-xxl shadow-sm" style="margin-top: 10px;">
                                <li class="list-group-item col-2 list-group-item-secondary fw-semibold" style="display: flex; align-items: center; justify-content: flex-end;">비밀번호 : </li>
                                <li class="list-group-item col-10" style="display: flex;"><button type="button" id="update_password" onclick="OpenModal()"  class="btn btn-outline-secondary shadow-sm">변경하기</button></li>
                            </ul>
                            <ul class="list-group list-group-horizontal-xxl shadow-sm" style="margin-top: 10px;">
                                <li class="list-group-item col-2 list-group-item-secondary fw-semibold" style="display: flex; align-items: center; justify-content: flex-end;">username : </li>
                                <li class="list-group-item col-10" style="display: flex;"><input id="update_username" class="btn border border-secondary-subtle rounded w-100"></li>
                            </ul>
                            <ul class="list-group list-group-horizontal-xxl shadow-sm" style="margin-top: 10px;">
                                <li class="list-group-item col-2 list-group-item-secondary fw-semibold" style="display: flex; align-items: center; justify-content: flex-end;">생년월일 : </li>
                                <li class="list-group-item col-10" style="display: flex;"><input type="date" id="update_birthday" class="btn border border-secondary-subtle rounded w-100"></span></li>
                            </ul>
                            <span id="profile_update_errors" style="color: red;"></span> <br>

                        <button type="button" id="update_btn" onclick="handleUpdateProfile()" class="btn btn-outline-secondary shadow-sm" style="margin: 0px;">수정하기</button>
                    </div>
                </div>
            </div>
        </div>

        
    </form>

    <div id="modalContainer" class="modal hidden" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title"><b>비밀번호 변경</b></h5>
              <button id="modalCloseButton" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="inputGroup-sizing-default">현재 비밀번호</span>
                    <input type="password" id="update_present_pw" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="inputGroup-sizing-default">새로운 비밀번호</span>
                    <input type="password" id="update_password_" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text" id="inputGroup-sizing-default">비밀번호 확인</span>
                    <input type="password" id="update_password_check" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                </div>
                <span id="pw_update_errors" style="color: red;"></span> <br>
            </div>
            <div class="modal-footer">
              <button type="button" id="pw_submit_btn" class="btn btn-secondary" onclick="handleUpdatePassword()" data-bs-dismiss="modal">수정</button>
            </div>
          </div>
        </div>
      </div>
</body>
</html>